{% extends "taxiapp/base.html" %}
{% block main %}
<link rel="stylesheet" href="https://cdn.datatables.net/1.10.13/css/dataTables.bootstrap.min.css"/>

</head>

<div style="padding-bottom: 55px;">
    
   <!-- <div class="container">
        <div class="row">
          <div class="col-lg-3">
                Select City : <select name="city" id="city">
                        {% for i in cities %}
                        <option value={{i}}>{{i}}</option>
                        {% endfor %}
                         
                    </select>
          </div>
          <div class="col-lg-3">
                Select Vehicle Type : <select name="vehicletype" id="vehicletype">
                        {% for i in vehicletypes %}
                        <option value={{i}}>{{i}}</option>
                        {% endfor %}
                         
                    </select>
              
          </div>
        </div>
      </div> -->
    <center><h3>Vehicle Registrations</h3></center>
    <table id="taxi-list" class="table table-striped table-bordered" width="100%" cellspacing="0">
            <thead>
                <tr>
                    <th>City </th>
                    <th>Today </th>
                    <th>This Week</th>
                    <th>This Month</th>
                    <th>This Year</th>
                    <th>Total</th>
                    
                </tr>
            </thead>
            <!-- <tfoot>
                    <tr>
                            <th>Today </th>
                            <th>This Week</th>
                            <th>This Month</th>
                            <th>This Year</th>
                            <th>Total</th>
                            
                        </tr>
            </tfoot> -->
            <tbody>

                
                <tr>
                    <td>All</td>
                    <td>{{todayVRCount}}</td>
                    <td>{{thisWeekVRCount}}</td>
                    <td>{{thisMonthVRCount}}</td>
                    <td>{{thisYearVRCount}}</td>
                    <td>{{total}}</td>
                    
                </tr>
                
            </tbody>
    </table>
    
    </div>

<div style="padding-bottom: 55px;">
<center><h3>Vehicle List</h3></center>
<table id="taxi-list" class="table table-striped table-bordered" width="100%" cellspacing="0">
        <thead>
            <tr>
                <th>Number Plate</th>
                <th>Traffic Number</th>
                <th>Owner Name</th>
                <th>Owner Phone Number</th>
                <th>Owner/Driver</th>
                <th>More Details</th>
            </tr>
        </thead>
        <tfoot>
            <tr>
		<th>Number Plate</th>
                <th>Traffic Number</th>
                <th>Owner Name</th>
                <th>Owner Phone Number</th>
                <th>Owner/Driver</th>
                <th>More Details</th>
            </tr>
        </tfoot>
        <tbody>
            {% for row in rows %}
            <tr>
                <td>{{row.number_plate}}</td>
                <td>{{row.traffic_number}}</td>
                <td>{{row.owner.owner_name}}</td>
                <td>{{row.owner.phone_number}}</td>
                <td>{{row.is_owner_driver}}</td>
                <td><a href="{% url 'taxiapp:taxi_detail' pk=row.traffic_number %}">{{'More Details'}}</a></td>
            </tr>
            {% endfor %}
        </tbody>
</table>
<!-- {% if rows.has_other_pages %}
  <ul class="pagination">
    {% if rows.has_previous %}
      <li><a href="?page={{ rows.previous_page_number }}">&laquo;</a></li>
    {% else %}
      <li class="disabled"><span>&laquo;</span></li>
    {% endif %}
    {% for i in rows.paginator.page_range %}
      {% if rows.number == i %}
        <li class="active"><span>{{ i }} <span class="sr-only">(current)</span></span></li>
      {% else %}
        <li><a href="?page={{ i }}">{{ i }}</a></li>
      {% endif %}
    {% endfor %}
    {% if rows.has_next %}
      <li><a href="?page={{ rows.next_page_number }}">&raquo;</a></li>
    {% else %}
      <li class="disabled"><span>&raquo;</span></li>
    {% endif %}
  </ul>
{% endif %} -->

<!-- {% if rows.has_other_pages %}
<ul class="pagination">
{% if rows.has_previous %}
<li>«</li>
{% else %}
<li class="disabled">«</li>
{% endif %}
{% for i in rows.paginator.page_range %}
{% if rows.number > 3 and forloop.first %}
<li>1</li>
<li class="disabled">⋯</li>
{% endif %}
{% if rows.number == i %}
<li class="active">{{ i }} (current)</li>
{% elif i > rows.number|add:'-3' and i < rows.number|add:'3' %}
<li>{{ i }}</li>
{% endif %}
{% if rows.paginator.num_pages > rows.number|add:'3' and forloop.last %}
<li>⋯</li>
<li>{{ rows.paginator.num_pages }}</li>
{% endif %}
{% endfor %}
{% if rows.has_next %}
<li>»</li>
{% else %}
<li class="disabled">»</li>
{% endif %}
</ul>
{% endif %} -->
<!-- {% for i in rows.paginator.page_range %}
{% if rows.number == i %}
<li class="active">{{ i }} (current)</li>
{% elif i > rows.number|add:'-4' and i < rows.number|add:'4' %}
<li>{{ i }}</li>
{% endif %}
{% endfor %} -->
<ul class="pagination" style="float: right;">

    {% if rows.has_previous %}
        <li><a href="?page={{ rows.previous_page_number }}"><i class="fa fa-chevron-left" aria-hidden="true"></i></a></li>
    {% else %}
        <li class="disabled"><span><i class="fa fa-chevron-left" aria-hidden="true"></i></span></li>
    {% endif %}
    
    {% if rows.number|add:'-4' > 1 %}
        <li><a href="?page={{ rows.number|add:'-5' }}">&hellip;</a></li>
    {% endif %}
    
    {% for i in rows.paginator.page_range %}
        {% if rows.number == i %}
            <li class="active"><span>{{ i }} <span class="sr-only">(current)</span></span></li>
        {% elif i > rows.number|add:'-5' and i < rows.number|add:'5' %}
            <li><a href="?page={{ i }}">{{ i }}</a></li>
        {% endif %}
    {% endfor %}
    
    {% if rows.paginator.num_pages > rows.number|add:'4' %}
        <li><a href="?page={{ rows.number|add:'5' }}">&hellip;</a></li>
    {% endif %}
    
    {% if rows.has_next %}
        <li><a href="?page={{ rows.next_page_number }}"><i class="fa fa-chevron-right" aria-hidden="true"></i></a></li>
    {% else %}
        <li class="disabled"><span><i class="fa fa-chevron-right" aria-hidden="true"></i></span></li>
    {% endif %}
    
    </ul>
</div>

<script src="https://cdn.datatables.net/1.10.13/js/jquery.dataTables.min.js"/></script>
<script src="https://cdn.datatables.net/1.10.13/js/dataTables.bootstrap.min.js"/></script>
<script>
// $(document).ready(function() {
//     $('#taxi-list').DataTable();
// } );
</script>
<div>
<center><h3>Complaints</h3></center>
<table id="example" class="table table-striped table-bordered" width="100%" cellspacing="0">
        <thead>
            <tr>
                <th>Complaint Id</th>
                <th>Number Plate</th>
                <th>Traffic Number</th>
                <th>Owner Name</th>
                <th>Reason</th>
                <th>Assigned To</th>
                <th>Status</th>
                <th>More Details</th>
            </tr>
        </thead>
        <tfoot>
            <tr>
                <th>Complaint Id</th>
                <th>Number Plate</th>
                <th>Traffic Number</th>
                <th>Owner Name</th>
                <th>Reason</th>
                <th>Assigned To</th>
                <th>Status</th>
                <th>More Details</th>
            </tr>
        </tfoot>
        <tbody>
            {% for row in rows_c %}
            <tr>
                <td>{{row.complaint_number}}</td>
                <td>{{row.vehicle.number_plate}}</td>
                <td>{{row.vehicle.traffic_number}}</td>
                <td>{{row.vehicle.owner.owner_name}}</td>
                <td>{{row.reason.reason}}</td>
                {% if row.assigned_to.user_number %}
                <td>Id: {{row.assigned_to.user_number}} | SMS: {{row.assigned_to.sms_number}}</td>
                {% else %}
                <td>Id: Admin | SMS: {{row.assigned_to.sms_number}}</td>
                {% endif %}
                {% if row.resolved == False %}
                <td><a href="{% url 'taxiapp:complaint_view' pk=row.complaint_number %}"><button>Resolve</button></a></td>
                {% else %}
                <td>{{'Resolved'}}</td>
                {% endif %}
                <td><a href="{% url 'taxiapp:complaint_view' pk=row.complaint_number %}">More Details</a></td>
            </tr>
            {% endfor %}
        </tbody>
</table>
</div>
<script src="https://cdn.datatables.net/1.10.13/js/jquery.dataTables.min.js"/></script>
<script src="https://cdn.datatables.net/1.10.13/js/dataTables.bootstrap.min.js"/></script>
<script>
$(document).ready(function() {
    $('#example').DataTable();
} );
</script>

<!-- Data grid for customer ratings -->
<div>
    <center><h3>Customer Ratings</h3></center>
    <table id="customer_ratings" class="table table-striped table-bordered" width="100%" cellspacing="0">
            <thead>
                <tr>
                    <th>Number Plate</th>
                    <th>Traffic Number</th>
                    <th>Driver Name</th>
                    <th>Reason</th>
                    <th>Phone Number</th>
                    <th>Origin Area</th>
                    <th>Destination Area</th>
                    <th>Rating Type</th>
                </tr>
            </thead>
            <tfoot>
                <tr>
                    <th>Number Plate</th>
                    <th>Traffic Number</th>
                    <th>Driver Name</th>
                    <th>Reason</th>
                    <th>Phone Number</th>
                    <th>Origin Area</th>
                    <th>Destination Area</th>
                    <th>Rating Type</th>
                </tr>
            </tfoot>
            <tbody>
                {% for rating in ratings %}
                <tr>
                    
                    <td>{{rating.vehicle.number_plate}}</td>
                    <td>{{rating.vehicle.traffic_number}}</td>
                    <td>{{rating.driver.driver_name}}</td>
                    <td>{{rating.reason}}</td>
                    <td>{{rating.phone_number}}</td>
                    <td>{{rating.origin_area}}</td>
                    <td>{{rating.destination_area}}</td>
                    <td>{{rating.rating_type.rating_type}}</td>
                    
                </tr>
                {% endfor %}
            </tbody>
    </table>
    </div>
    <script src="https://cdn.datatables.net/1.10.13/js/jquery.dataTables.min.js"/></script>
    <script src="https://cdn.datatables.net/1.10.13/js/dataTables.bootstrap.min.js"/></script>
    <script>
    $(document).ready(function() {
        $('#customer_ratings').DataTable();
    } );
    </script>

{% endblock %}
