{% extends "taxiapp/base.html" %}
{% block main %}
<link rel="stylesheet" href="https://cdn.datatables.net/1.10.13/css/dataTables.bootstrap.min.css"/>

</head>

<center><h3>Vehicle List</h3></center>
<table id="taxi-list" class="table table-striped table-bordered" width="100%" cellspacing="0">
        <thead>
            <tr>
                <th>Number Plate</th>
                <th>Traffic Number</th>
                <th>Name</th>
                <th>Phone Number</th>
                <th>Owner/Driver</th>
                <th>More Details</th>
            </tr>
        </thead>
        <tfoot>
            <tr>
		<th>Number Plate</th>
                <th>Traffic Number</th>
                <th>Driver Name</th>
                <th>Phone Number</th>
                <th>Owner/Driver</th>
                <th>More Details</th>
            </tr>
        </tfoot>
        <tbody>
            {% for row in rows %}
            <tr>
                <td>{{row.get_number_plate}}</td>
                <td>{{row.traffic_number}}</td>
                <td>{{row.driver_name}}</td>
                <td>{{row.phone_number}}</td>
                <td>{{row.owner_driver}}</td>
                <td><a href="{% url 'taxiapp:taxi_detail' pk=row.traffic_number %}">{{'More Details'}}</a></td>
            </tr>
            {% endfor %}
        </tbody>
</table>
<script src="https://cdn.datatables.net/1.10.13/js/jquery.dataTables.min.js"/></script>
<script src="https://cdn.datatables.net/1.10.13/js/dataTables.bootstrap.min.js"/></script>
<script>
$(document).ready(function() {
    $('#taxi-list').DataTable();
} );
</script>
<center><h3>Complaints</h3></center>
<table id="example" class="table table-striped table-bordered" width="100%" cellspacing="0">
        <thead>
            <tr>
                <th>Complaint Id</th>
                <th>Number Plate</th>
                <th>Traffic Number</th>
                <th>Driver Name</th>
                <th>Reason</th>
                <th>Assigned To</th>
                <th>Status</th>
                <th>More Details</th>
            </tr>
        </thead>
        <tfoot>
            <tr>
                <th>Complaint Id</th>
                <th>Number Plate</th>
                <th>Traffic Number</th>
                <th>Driver Name</th>
                <th>Reason</th>
                <th>Assigned To</th>
                <th>Status</th>
                <th>More Details</th>
            </tr>
        </tfoot>
        <tbody>
            {% for row in rows_c %}
            <tr>
                <td>{{row.complaint_number}}</td>
                <td>{{row.taxi.get_number_plate}}</td>
                <td>{{row.taxi.traffic_number}}</td>
                <td>{{row.taxi.driver_name}}</td>
                <td>{{row.reason.reason}}</td>
                {% if row.assigned_to.user_number %}
                <td>Id: {{row.assigned_to.user_number}} | SMS: {{row.assigned_to.sms_number}}</td>
                {% else %}
                <td>Id: Admin | SMS: {{row.assigned_to.sms_number}}</td>
                {% endif %}
                {% if row.resolved == False %}
                <td><a href="{% url 'taxiapp:complaint_resolve' pk=row.id %}"><button>Resolve</button></a></td>
                {% else %}
                <td>{{'Resolved'}}</td>
                {% endif %}
                <td><a href="{% url 'taxiapp:complaint_view' pk=row.complaint_number %}">More Details</a></td>
            </tr>
            {% endfor %}
        </tbody>
</table>
<script src="https://cdn.datatables.net/1.10.13/js/jquery.dataTables.min.js"/></script>
<script src="https://cdn.datatables.net/1.10.13/js/dataTables.bootstrap.min.js"/></script>
<script>
$(document).ready(function() {
    $('#example').DataTable();
} );
</script>

{% endblock %}
